{"version":3,"file":"static/js/87.466f8725.chunk.js","mappings":"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","sources":["assets/wave1.svg","assets/wave2.svg","views/NewMovieForm.jsx"],"sourcesContent":["var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgWave1(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 1440 320\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#20DF7F\",\n    fillOpacity: 0.3,\n    d: \"M0,192L80,186.7C160,181,320,171,480,186.7C640,203,800,245,960,250.7C1120,256,1280,224,1360,208L1440,192L1440,320L1360,320C1280,320,1120,320,960,320C800,320,640,320,480,320C320,320,160,320,80,320L0,320Z\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgWave1);\nexport default __webpack_public_path__ + \"static/media/wave1.2cf55c9dc94e0873f960159fbc6396e8.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgWave2(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 1440 320\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#E5E5E5\",\n    fillOpacity: 0.5,\n    d: \"M0,224L60,229.3C120,235,240,245,360,234.7C480,224,600,192,720,192C840,192,960,224,1080,229.3C1200,235,1320,213,1380,202.7L1440,192L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgWave2);\nexport default __webpack_public_path__ + \"static/media/wave2.bd8227b0dce83a6bc9850dbf8ccf1e95.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nimport wave from '../assets/wave1.svg';\nimport wave2 from '../assets/wave2.svg';\nimport { useNavigate, useLocation } from 'react-router-dom';\n\nconst NewMovieForm = () => {\n    const navigate = useNavigate();\n    const { state } = useLocation();\n\n    const [title, setTitle] = useState('');\n    const [year, setYear] = useState('');\n    const [image, setImage] = useState(null);\n    const [imagePreview, setPreview] = useState(null);\n    const [imageType, setImageType] = useState('');\n    const [error, setError] = useState('');\n\n    useEffect(() => {\n        if (state && state.movie) {\n            setTitle(state.movie.name);\n            setYear(state.movie.year);\n            setPreview(`data:${state.movie.imageType};base64,${state.movie.image}`);\n            setImageType(state.movie.imageType);\n            setImage(state.movie.image);\n        }\n    }, [state]);\n\n    const goTo = (route) => {\n        navigate(route);\n    }\n\n    const handleImageUpload = (event) => {\n        const file = event.target.files[0];\n\n        if (file) {\n            if (file.type.startsWith('image/')) {\n                // setImage(file);\n\n                const reader = new FileReader();\n                reader.onloadend = () => {\n                    setPreview(reader.result);\n                    const base64String = reader.result.replace(\"data: \", \"\").replace(/^.+,/, \"\")\n                    setImage({ ...image, image: base64String })\n                    setImageType(file.type);\n                };\n\n                reader.readAsDataURL(file);\n            } else {\n                setError('Please upload a valid image.');\n            }\n        }\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        setError('');\n\n        if (!title | !year | !image) {\n            setError('Fill in all fields, upload an image then submit');\n            return;\n        }\n\n        let userData = JSON.parse(localStorage.getItem('userData'));\n\n        let data = {\n            name: title,\n            year: year,\n            image: image.image,\n            imageType: imageType,\n            userId: userData.userId\n        }\n\n        if (state && state.movie) {\n            data['movieId'] = state.movie._id;\n            if (typeof image === 'string' || image instanceof String) {\n                data['image'] = image;\n            }\n\n            axios.post('http://10.6.0.10:9494/users/editmovie', data)\n            .then(response => {\n                if (!!response.data.status) {\n                    goTo('/dashboard');\n                }\n            }).catch(err => {\n                setError('An error occured when editing the movie.');\n            });\n        } else {\n            axios.post('http://10.6.0.10:9494/users/addmovie', data)\n            .then(response => {\n                if (!!response.data.status) {\n                    goTo('/dashboard');\n                }\n            }).catch(err => {\n                setError('An error occured when adding the movie.');\n            });\n        }\n\n    }\n\n    return (\n        <div>\n            <div className=\"add-movie-container\">\n                <h1 className='heading-one'>Create a new movie</h1>\n                <form onSubmit={handleSubmit} className='add-movie-form'>\n                    <div className='image-upload'>\n                        <input id='file-input' type='file' accept='image/*' onChange={handleImageUpload} className='file-input' />\n                        <label>\n                            {imagePreview ? (\n                                <img src={imagePreview} alt=\"Movie\" className='image-preview' />\n                            ) : (\n                                <div className='image-placeholder'>Drop an image here</div>\n                            )}\n                        </label>\n                    </div>\n                    <div className='movie-info'>\n                        <input type='text' placeholder='Title' value={title} onChange={(e) => setTitle(e.target.value)} className='input-field' />\n                        <input type='text' placeholder='Publising year' value={year} onChange={(e) => setYear(e.target.value)} className='input-field' />\n                        <div className='button-group'>\n                            <button type='button' className='cancel-button' onClick={() => goTo('/dashboard')}>Cancel</button>\n                            <button type='submit' className='submit-button'>Submit</button>\n                        </div>\n                    </div>\n                    <div>{error}</div>\n                </form>\n            </div>\n            <div className='footer'>\n                <div className='wave-container'>\n                    <img src={wave} className=\"wave wave1\" alt=\"wave\" />\n                    <img src={wave2} className=\"wave wave2\" alt=\"wave\" />\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default NewMovieForm;\n"],"names":["NewMovieForm","navigate","useNavigate","state","useLocation","title","setTitle","useState","year","setYear","image","setImage","imagePreview","setPreview","imageType","setImageType","error","setError","useEffect","movie","name","goTo","route","_jsxs","children","className","_jsx","onSubmit","e","preventDefault","userData","JSON","parse","localStorage","getItem","data","userId","_id","String","axios","post","then","response","status","catch","err","id","type","accept","onChange","event","file","target","files","startsWith","reader","FileReader","onloadend","result","base64String","replace","readAsDataURL","src","alt","placeholder","value","onClick","wave","wave2"],"sourceRoot":""}