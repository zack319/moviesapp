"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[87],{411:(e,a,t)=>{t.d(a,{A:()=>s});t(43);const s=t.p+"static/media/wave1.2cf55c9dc94e0873f960159fbc6396e8.svg"},16:(e,a,t)=>{t.d(a,{A:()=>s});t(43);const s=t.p+"static/media/wave2.bd8227b0dce83a6bc9850dbf8ccf1e95.svg"},87:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var s=t(43),i=t(213),n=t(411),l=t(16),c=t(216),d=t(579);const r=()=>{const e=(0,c.Zp)(),{state:a}=(0,c.zy)(),[t,r]=(0,s.useState)(""),[o,m]=(0,s.useState)(""),[u,v]=(0,s.useState)(null),[p,h]=(0,s.useState)(null),[g,f]=(0,s.useState)(""),[b,x]=(0,s.useState)("");(0,s.useEffect)((()=>{a&&a.movie&&(r(a.movie.name),m(a.movie.year),h(`data:${a.movie.imageType};base64,${a.movie.image}`),f(a.movie.imageType),v(a.movie.image))}),[a]);const j=a=>{e(a)};return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"add-movie-container",children:[(0,d.jsx)("h1",{className:"heading-one",children:"Create a new movie"}),(0,d.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),x(""),!t|!o|!u)return void x("Fill in all fields, upload an image then submit");let s=JSON.parse(localStorage.getItem("userData")),n={name:t,year:o,image:u.image,imageType:g,userId:s.userId};a&&a.movie?(n.movieId=a.movie._id,("string"===typeof u||u instanceof String)&&(n.image=u),i.A.post("http://10.6.0.10:9494/users/editmovie",n).then((e=>{e.data.status&&j("/dashboard")})).catch((e=>{x("An error occured when editing the movie.")}))):i.A.post("http://10.6.0.10:9494/users/addmovie",n).then((e=>{e.data.status&&j("/dashboard")})).catch((e=>{x("An error occured when adding the movie.")}))},className:"add-movie-form",children:[(0,d.jsxs)("div",{className:"image-upload",children:[(0,d.jsx)("input",{id:"file-input",type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];if(a)if(a.type.startsWith("image/")){const e=new FileReader;e.onloadend=()=>{h(e.result);const t=e.result.replace("data: ","").replace(/^.+,/,"");v({...u,image:t}),f(a.type)},e.readAsDataURL(a)}else x("Please upload a valid image.")},className:"file-input"}),(0,d.jsx)("label",{children:p?(0,d.jsx)("img",{src:p,alt:"Movie",className:"image-preview"}):(0,d.jsx)("div",{className:"image-placeholder",children:"Drop an image here"})})]}),(0,d.jsxs)("div",{className:"movie-info",children:[(0,d.jsx)("input",{type:"text",placeholder:"Title",value:t,onChange:e=>r(e.target.value),className:"input-field"}),(0,d.jsx)("input",{type:"text",placeholder:"Publising year",value:o,onChange:e=>m(e.target.value),className:"input-field"}),(0,d.jsxs)("div",{className:"button-group",children:[(0,d.jsx)("button",{type:"button",className:"cancel-button",onClick:()=>j("/dashboard"),children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"submit-button",children:"Submit"})]})]}),(0,d.jsx)("div",{children:b})]})]}),(0,d.jsx)("div",{className:"footer",children:(0,d.jsxs)("div",{className:"wave-container",children:[(0,d.jsx)("img",{src:n.A,className:"wave wave1",alt:"wave"}),(0,d.jsx)("img",{src:l.A,className:"wave wave2",alt:"wave"})]})})]})}}}]);
//# sourceMappingURL=87.466f8725.chunk.js.map